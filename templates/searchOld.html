<html>
  <head>
    <title>Search towns</title>
    
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="/media/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    
     <script type="text/javascript"
		 src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js">
		</script>
	 <script src="http://code.jquery.com/jquery.js"></script>
    <script src="/media/bootstrap/js/bootstrap.min.js"></script> 
	  
	  <script type="text/javascript">
		  
			$( document ).ready(function() {
			
				$( "#field" ).bind('click keyup', function(event) {
					var inputText = $("#field").val();
					
					$.ajax({
						  type: "POST",
						  url: '/ajax/',
						  data: {'data' : inputText},
						  success: function (data) {
						   $('#search li').remove();
						   
						   $.each(data['data'], function(i, l) {
						
							   $("#search ul").append( '<li><a href="#">' + l + '</a></li>');
							});

						  },
						  dataType: 'json'
						});
						
				
				});
				$( document.body).on( 'click', '.dropdown-menu li', function( event ) {
				 
				   var $target = $( event.currentTarget );
				   $('#field').val($target.text());
				   $('#formF').submit();
				 
				});
				
			});
			
	     </script>
    
     
  
  </head>
  
  <body>
	  
	 <h1 class="text-center" > Информация о городах России </h1>
	<div>
	 
	     <form action="." method="POST" id='formF'>
			<div class="form-group dropdown" id="search">
                <input type="text" autocomplete="off" class="form-control" placeholder="Начните вводить название города" data-toggle="dropdown" name="prefix" id="field">
            
                <ul class="dropdown-menu" role="menu">
			  </ul>
			</div>
          </form>
         
         {% if info %}
	     Подробнее о городе {{data}} можно ознакомиться здесь: 
	     <a href="http://ru.wikipedia.org/wiki/{{data}}"> {{data}}</a>
	     {% endif %}
	</div>	  		     
  </body>
</html>
